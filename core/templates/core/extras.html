{% extends './base.html' %}
{% block content %}
<div class="jumbotron text-dark">
  <h1 class="display-5">Users</h1>
  {% with is_authenticated=user.is_authenticated is_staff=user.is_staff%}
  {% if users %}
  <div class="table-responsive mt-5">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Username</th>
          <th scope="col">Status</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr>
          <th scope="row">{{ forloop.counter }}</th>
          <td>@{{ user.username }}</td>
          <td>{% if user.is_active %}Active{% else %}Inctive{% endif %}</td>
          <td>
            {% if is_authenticated and is_staff %}
              {% if not user.is_active %}
                <a class="btn btn-success btn-sm" href="{% url 'auth:enable' username=user.username %}" role="button">Enable</a>
              {% else %}
                <a class="btn btn-danger btn-sm" href="{% url 'auth:disable' username=user.username %}" role="button">Disable</a>
              {% endif %}
              <a class="btn btn-danger btn-sm" href="{% url 'auth:delete' username=user.username %}" role="button">Delete</a>
            {% else %}
              No actions
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <p class="text-muted">No inactive users found</p>
  {% endif %}
  {% endwith %}
</div>
{% endblock %}
